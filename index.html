<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decodificador</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>f(x) <-- x = posição da letra no alfabeto. Ex: G = 7, A = 1, Z = 26</h1>
        <h1>Alterar o valor{F de 7} abaixo somente se necessário. 7 = G</h1>
        <h1>Valor conhecido = Valor da letra codificado. Ex: 32(7xA+B=32, 7 = f(7) )</h1>
    </header>
    <div id="label">
        <label for="valorX">Digite o valor de f(x): </label>
        <input type="number" id="valorX" min="1" max="100" value="7">
        <label for="valorConhecido">Digite o resultado desejado: </label>
        <input type="number" id="valorConhecido" min="1" max="100">
        <br>
        <br>
        <label for="palavra">Digite o texto: </label>
        <br>
        <input type="text" id="palavra" maxlength="100">
        <br>
        <button id="iniciar">Iniciar</button>
    </div>
    
    <div id="resultado"></div>

    <script>
        function resolveEquacao(a, b, x) {
            return a * x + b;
        }

        function decodificar(resultadoDesejado) {
            for (let a = -6; a <= 6; a++) {
                for (let b = -6; b <= 6; b++) {
                    let resultadoAtual = resolveEquacao(a, b, document.getElementById('valorX').value);
                    if (resultadoAtual === resultadoDesejado) {
                        return { a: a, b: b };
                    }
                }
            }
            return null;
        }

        document.getElementById('iniciar').addEventListener('click', function() {
            let resultadoConhecido = parseInt(document.getElementById('valorConhecido').value);
            let palavra = document.getElementById('palavra').value.toUpperCase();
            let valoresDecodificados = decodificar(resultadoConhecido);
            let resultadoHTML = '';

            if (valoresDecodificados) {
                resultadoHTML += `<p>Para f(${document.getElementById('valorX').value}) = a${document.getElementById('valorX').value} + b = ${resultadoConhecido}, a = ${valoresDecodificados.a} e b = ${valoresDecodificados.b}</p>`
                resultadoHTML += '<p>Valores codificados A-Z:</p>';
                let codificado = "";
                for (let i = 0; i < palavra.length; i++) {
                    if (palavra[i] === ' ') {
                        resultadoHTML += `<p>${palavra[i]} = Espaço</p>`;
                    } else {
                        let valorLetra = (valoresDecodificados.a * (palavra.charCodeAt(i) - 65 + 1)) + valoresDecodificados.b;
                        resultadoHTML += `<p>${palavra[i]} = ${valorLetra}</p>`;
                        codificado += `${valorLetra}-`;
                    }
                }
                if (codificado !== "") {
                    resultadoHTML += `<p>Criptografado: ${codificado.slice(0, -1)}</p>`;
                }
                resultadoHTML += `<footer>&copy; By Felipe</footer>`
            } else {
                resultadoHTML = `<p>Não foi possível gerar o alfabeto codificado usando engenharia reversa.</p>`;
            }

            document.getElementById('resultado').innerHTML = resultadoHTML;
        });
    </script>
</body>
</html>
